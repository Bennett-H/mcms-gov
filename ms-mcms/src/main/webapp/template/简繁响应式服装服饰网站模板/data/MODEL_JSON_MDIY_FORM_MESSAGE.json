{"id":"1673890441816612865","modelName":"在线留言","modelTableName":"MDIY_FORM_MESSAGE","notDel":0,"modelType":"","modelCustomType":"form","modelJson":"{\"searchJson\":\"[\\n        //你的名字\\n        {'action':'and', 'field': 'USERNAME', 'el': 'eq', 'model': 'username', 'name': '你的名字', 'type': 'input'},\\n        //常用电话\\n        {'action':'and', 'field': 'MOBILE', 'el': 'eq', 'model': 'mobile', 'name': '常用电话', 'type': 'input'},\\n        //邮箱\\n        {'action':'and', 'field': 'EMAIL', 'el': 'eq', 'model': 'email', 'name': '邮箱', 'type': 'input'},\\n        // 留言内容\\n        {'action':'and', 'field': 'CONTENT', 'el': 'eq', 'model': 'content', 'name': '留言内容', 'type': 'textarea'},\\n]\\n\",\"isWebCode\":false,\"isWebSubmit\":true,\"html\":\"\\n<template id=\\\"custom-model\\\">\\n    <el-form ref=\\\"form\\\" :model=\\\"form\\\" :rules=\\\"rules\\\" label-width=\\\"120px\\\" label-position=\\\"right\\\" size=\\\"small\\\">\\n\\n            <!--你的名字-->\\n\\t        <el-form-item  label=\\\"你的名字\\\" prop=\\\"username\\\">\\n\\t            <el-input\\n                        v-model=\\\"form.username\\\"\\n                         :disabled=\\\"false\\\"\\n                          :readonly=\\\"false\\\"\\n                          :style=\\\"{width:  '100%'}\\\"\\n                          :clearable=\\\"true\\\"\\n                        placeholder=\\\"请输入名字\\\">\\n                </el-input>\\n\\t        </el-form-item>   \\n            <!--常用电话-->\\n\\t        <el-form-item  label=\\\"常用电话\\\" prop=\\\"mobile\\\">\\n\\t            <el-input\\n                        v-model=\\\"form.mobile\\\"\\n                         :disabled=\\\"false\\\"\\n                          :readonly=\\\"false\\\"\\n                          :style=\\\"{width:  '100%'}\\\"\\n                          :clearable=\\\"true\\\"\\n                        placeholder=\\\"请输入电话\\\">\\n                </el-input>\\n\\t        </el-form-item>   \\n            <!--邮箱-->\\n\\t        <el-form-item  label=\\\"邮箱\\\" prop=\\\"email\\\">\\n\\t            <el-input\\n                        v-model=\\\"form.email\\\"\\n                         :disabled=\\\"false\\\"\\n                          :readonly=\\\"false\\\"\\n                          :style=\\\"{width:  '100%'}\\\"\\n                          :clearable=\\\"true\\\"\\n                        placeholder=\\\"请输入邮箱\\\">\\n                </el-input>\\n\\t        </el-form-item>   \\n        <!--留言内容-->\\t\\n\\t        <el-form-item  label=\\\"留言内容\\\" prop=\\\"content\\\">\\n\\t            <el-input\\n                        type=\\\"textarea\\\" :rows=\\\"5\\\"\\n                        :disabled=\\\"false\\\"\\n                        :readonly=\\\"form.id>0?true:false\\\"\\n                        v-model=\\\"form.content\\\"\\n                        :style=\\\"{width: '100%'}\\\"\\n                        placeholder=\\\"请输入留言内容\\\">\\n                </el-input>\\n\\t        </el-form-item>\\n\\t   \\n    </el-form>\\n</template>\\n\",\"script\":\"\\n\\nvar custom_model = Vue.component(\\\"custom-model\\\",{\\n    el: '#custom-model',\\n    data:function() {\\n        return {\\n\\n            modelId:0,\\n            modelName: \\\"在线留言\\\",\\n            //表单数据\\n            form: {\\n                linkId:0,\\n                    // 你的名字\\n                    username:'',\\n                    // 常用电话\\n                    mobile:'',\\n                    // 邮箱\\n                    email:'',\\n                    // 留言内容 \\n                    content:'',\\n            },\\n\\n            rules:{\\n                        // 你的名字\\n                        username: [{\\\"required\\\":true,\\\"message\\\":\\\"你的名字不能为空\\\"},{\\\"min\\\":0,\\\"max\\\":255,\\\"message\\\":\\\"你的名字长度必须为0-255\\\"}],\\n                        // 常用电话\\n                        mobile: [{\\\"required\\\":true,\\\"message\\\":\\\"常用电话不能为空\\\"},{\\\"min\\\":0,\\\"max\\\":255,\\\"message\\\":\\\"常用电话长度必须为0-255\\\"}],\\n                        // 邮箱\\n                        email: [{\\\"min\\\":0,\\\"max\\\":255,\\\"message\\\":\\\"邮箱长度必须为0-255\\\"}],\\n                        // 留言内容\\n                        content: [{\\\"required\\\":true,\\\"message\\\":\\\"留言内容不能为空\\\"}],\\n            },\\n        }\\n    },\\n    watch:{\\n    },\\n    components:{\\n    },\\n    computed:{\\n    },\\n    methods: {\\n        validate:function(){\\n            var b = false\\n            this.$refs.form.validate(function(valid){\\n                b = valid;\\n            });\\n            return b;\\n        },\\n        save:function(callback) {\\n            var that = this;\\n            var url = this.formURL.save.url;\\n            if (that.form.id > 0) {\\n                url = this.formURL.update.url;\\n            }\\n            this.$refs.form.validate(function(valid) {\\n                if (valid) {\\n\\n                    var form = JSON.parse(JSON.stringify(that.form));\\n                    form.modelId = that.modelId;\\n                    ms.http.post(url, form).then(function (res) {\\n                        if(callback) {\\n                            callback(res);\\n                        }\\n                    });\\n                }\\n                else{\\n                    callback({\\n                        result:false,msg:'请检查表单输入项'\\n                    });\\n                }\\n            })\\n        },\\n        //获取当前在线留言\\n        get:function(id) {\\n            var that = this;\\n            ms.http.get(this.formURL.get.url, Object.assign({\\\"modelId\\\":that.modelId},this.formURL.get.params)).then(function (res) {\\n                                                                         if(res.result&&res.data){\\n                    that.form = res.data;\\n                }\\n            }).catch(function (err) {\\n                console.log(err);\\n            });\\n        },\\n\\n    },\\n    created:function() {\\n        var that = this;\\n        //渲染create\\n        that.get(this.form.linkId);\\n    }\\n});\",\"sql\":\"\\n    -- MESSAGE\\n    CREATE TABLE `{model}MESSAGE` (\\n        `id` BIGINT(11) UNSIGNED NOT NULL AUTO_INCREMENT,\\n        `USERNAME` VARCHAR(255) DEFAULT NULL COMMENT '你的名字',\\n        `MOBILE` VARCHAR(255) DEFAULT NULL COMMENT '常用电话',\\n        `EMAIL` VARCHAR(255) DEFAULT NULL COMMENT '邮箱',\\n        `CONTENT` VARCHAR(255) DEFAULT NULL COMMENT '留言内容',\\n        \\n        `CREATE_DATE` DATETIME DEFAULT NULL COMMENT '创建时间',\\n        `CREATE_BY` VARCHAR(50) DEFAULT NULL COMMENT '创建人',\\n        `UPDATE_DATE` DATETIME DEFAULT NULL COMMENT '修改时间',\\n        `UPDATE_BY` VARCHAR(50) DEFAULT NULL COMMENT '修改人',\\n        `DEL` INT(1) DEFAULT 0 COMMENT '删除标记' ,\\n     PRIMARY KEY (`ID`) USING BTREE \\n    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC COMMENT='在线留言';\\nALTER TABLE `{model}MESSAGE` \\nADD UNIQUE INDEX `{model}MESSAGE_UNIQUE_LINK_ID`(`LINK_ID`) USING BTREE COMMENT 'link_id唯一索引';\\n\",\"tableName\":\"MESSAGE\"}","modelField":"[\n        {\n        \"model\":\"username\",\n        \"key\":\"USERNAME\",\n        \"field\":\"USERNAME\",\n        \"javaType\":\"String\",\n        \"jdbcType\":\"VARCHAR\",\n        \"name\":\"你的名字\",\n        \"type\":\"input\",\n        \"length\":\"255\",\n        \"isShow\":\"true\"\n        }\n        ,{\n        \"model\":\"mobile\",\n        \"key\":\"MOBILE\",\n        \"field\":\"MOBILE\",\n        \"javaType\":\"String\",\n        \"jdbcType\":\"VARCHAR\",\n        \"name\":\"常用电话\",\n        \"type\":\"input\",\n        \"length\":\"255\",\n        \"isShow\":\"true\"\n        }\n        ,{\n        \"model\":\"email\",\n        \"key\":\"EMAIL\",\n        \"field\":\"EMAIL\",\n        \"javaType\":\"String\",\n        \"jdbcType\":\"VARCHAR\",\n        \"name\":\"邮箱\",\n        \"type\":\"input\",\n        \"length\":\"255\",\n        \"isShow\":\"true\"\n        }\n        ,{\n        \"model\":\"content\",\n        \"key\":\"CONTENT\",\n        \"field\":\"CONTENT\",\n        \"javaType\":\"String\",\n        \"jdbcType\":\"VARCHAR\",\n        \"name\":\"留言内容\",\n        \"type\":\"textarea\",\n        \"length\":\"255\",\n        \"isShow\":\"false\"\n        }\n]\n\n","del":0}