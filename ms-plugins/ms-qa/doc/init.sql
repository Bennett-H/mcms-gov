INSERT INTO `qa` ( `qa_name`,`qa_table_name`,`qa_type`,`model_json`,`model_field`,`answer_limit`,`start_time`,`end_time`,`create_date`,`update_date`,`create_by`,`del` ) VALUES  ( '游戏调查','QA_GAME','','{\"searchJson\":\"[\\n]\\n\",\"isWebSubmit\":false,\"html\":\"\\n<template id=\\\"custom-model\\\">\\n    <el-form ref=\\\"form\\\" :model=\\\"form\\\" :rules=\\\"rules\\\" label-width=\\\"120px\\\" label-position=\\\"top\\\" size=\\\"small\\\">\\n\\n        <!--您平常玩什么游戏?-->\\n    \\n        <el-form-item  label=\\\"您平常玩什么游戏?\\\" prop=\\\"games\\\">\\n                    <el-checkbox-group\\n                            v-model=\\\"form.games\\\"\\n                            :style=\\\"{width: \'\'}\\\"\\n                            :disabled=\\\"false\\\">\\n                        <el-checkbox :style=\\\"{display: true ? \'inline-block\' : \'block\'}\\\" :label=\\\"item.value\\\"\\n                                     v-for=\'(item, index) in gamesOptions\' :key=\\\"item.value + index\\\">\\n                            {{item.label}}\\n                        </el-checkbox>\\n                    </el-checkbox-group>\\n        </el-form-item>\\n   \\n        <!--您平常喜欢什么类型的游戏-->\\n    \\n        <el-form-item  label=\\\"您平常喜欢什么类型的游戏\\\" prop=\\\"gameType\\\">\\n                    <el-checkbox-group\\n                            v-model=\\\"form.gameType\\\"\\n                            :style=\\\"{width: \'\'}\\\"\\n                            :disabled=\\\"false\\\">\\n                        <el-checkbox :style=\\\"{display: true ? \'inline-block\' : \'block\'}\\\" :label=\\\"item.value\\\"\\n                                     v-for=\'(item, index) in gameTypeOptions\' :key=\\\"item.value + index\\\">\\n                            {{item.label}}\\n                        </el-checkbox>\\n                    </el-checkbox-group>\\n        </el-form-item>\\n   \\n        <!--您一周的游玩时间大概多长-->\\n    \\n        <el-form-item  label=\\\"您一周的游玩时间大概多长\\\" prop=\\\"longTime\\\">\\n                    <el-radio-group v-model=\\\"form.longTime\\\"\\n                                    :style=\\\"{width: \'\'}\\\"\\n                                    :disabled=\\\"false\\\" >\\n                        <el-radio :style=\\\"{display: true ? \'inline-block\' : \'block\'}\\\" :label=\\\"item.value\\\"\\n                                  v-for=\'(item, index) in longTimeOptions\' :key=\\\"item.value + index\\\">\\n                            {{item.label}}\\n                        </el-radio>\\n                    </el-radio-group>\\n        </el-form-item>\\n   \\n        <!--您是否愿意为游戏充值-->\\n    \\n        <el-form-item  label=\\\"您是否愿意为游戏充值\\\" prop=\\\"isMoney\\\">\\n                    <el-radio-group v-model=\\\"form.isMoney\\\"\\n                                    :style=\\\"{width: \'\'}\\\"\\n                                    :disabled=\\\"false\\\" >\\n                        <el-radio :style=\\\"{display: true ? \'inline-block\' : \'block\'}\\\" :label=\\\"item.value\\\"\\n                                  v-for=\'(item, index) in isMoneyOptions\' :key=\\\"item.value + index\\\">\\n                            {{item.label}}\\n                        </el-radio>\\n                    </el-radio-group>\\n        </el-form-item>\\n   \\n        <!--如果愿意接受充值的仅额是多少-->\\n    \\n        <el-form-item  label=\\\"如果愿意接受充值的仅额是多少\\\" prop=\\\"moneyLong\\\">\\n                    <el-radio-group v-model=\\\"form.moneyLong\\\"\\n                                    :style=\\\"{width: \'\'}\\\"\\n                                    :disabled=\\\"false\\\" >\\n                        <el-radio :style=\\\"{display: true ? \'inline-block\' : \'block\'}\\\" :label=\\\"item.value\\\"\\n                                  v-for=\'(item, index) in moneyLongOptions\' :key=\\\"item.value + index\\\">\\n                            {{item.label}}\\n                        </el-radio>\\n                    </el-radio-group>\\n        </el-form-item>\\n   \\n    </el-form>\\n</template>\\n\",\"script\":\"\\n\\nvar custom_model = Vue.component(\\\"custom-model\\\",{\\nel: \'#custom-model\',\\ndata:function() {\\nreturn {\\n\\nmodelId:0,\\nmodelName: \\\"游戏调查\\\",\\n                // 您平常玩什么游戏?\\n                gamesOptions:[{\\\"value\\\":\\\"lol\\\",\\\"label\\\":\\\"lol\\\"},{\\\"value\\\":\\\"cf\\\",\\\"label\\\":\\\"cf\\\"},{\\\"value\\\":\\\"dnf\\\",\\\"label\\\":\\\"dnf\\\"},{\\\"value\\\":\\\"其他\\\",\\\"label\\\":\\\"其他\\\"}],\\n                // 您平常喜欢什么类型的游戏\\n                gameTypeOptions:[{\\\"value\\\":\\\"竞技\\\",\\\"label\\\":\\\"竞技\\\"},{\\\"value\\\":\\\"休闲\\\",\\\"label\\\":\\\"休闲\\\"},{\\\"value\\\":\\\"其他\\\",\\\"label\\\":\\\"其他\\\"}],\\n                // 您一周的游玩时间大概多长\\n                longTimeOptions:[{\\\"value\\\":\\\"1~3\\\",\\\"label\\\":\\\"1~3\\\"},{\\\"value\\\":\\\"3~5\\\",\\\"label\\\":\\\"3~5\\\"},{\\\"value\\\":\\\"5~10\\\",\\\"label\\\":\\\"5~10\\\"},{\\\"value\\\":\\\"其他\\\",\\\"label\\\":\\\"其他\\\"}],\\n                // 您是否愿意为游戏充值\\n                isMoneyOptions:[{\\\"value\\\":\\\"是\\\",\\\"label\\\":\\\"是\\\"},{\\\"value\\\":\\\"否\\\",\\\"label\\\":\\\"否\\\"}],\\n                // 如果愿意接受充值的仅额是多少\\n                moneyLongOptions:[{\\\"value\\\":\\\"0~100\\\",\\\"label\\\":\\\"0~100\\\"},{\\\"value\\\":\\\"100~200\\\",\\\"label\\\":\\\"100~200\\\"},{\\\"value\\\":\\\"其他\\\",\\\"label\\\":\\\"其他\\\"}],\\n//表单数据\\nform: {\\nlinkId:0,\\n                    //您平常玩什么游戏? \\n                    games: [],\\n                    //您平常喜欢什么类型的游戏 \\n                    gameType: [],\\n                    //您一周的游玩时间大概多长  \\n                    longTime:\'1\',\\n                    //您是否愿意为游戏充值  \\n                    isMoney:\'4\',\\n                    //如果愿意接受充值的仅额是多少  \\n                    moneyLong:\'4\',\\n},\\n\\nrules:{\\n},\\n}\\n},\\nwatch:{\\n},\\ncomputed:{\\n},\\nmethods: {\\n                   //您平常玩什么游戏?  列表格式化\\n\\t\\tgamesFormat:function(row, column, cellValue, index){\\n\\n\\t\\t\\tvar that = this\\n\\t\\t\\tvar values = [];\\n\\n            \\n\\t\\t\\tvar array = cellValue.split(\\\",\\\");\\n\\n\\t\\t\\tarray.forEach(function (item) {\\n                if (item) {\\n                    var data = that.gamesOptions.find(function (value) {\\n                        return value.value == item;\\n                    })\\n                    if(data && data.label){\\n                        values.push(data.label);\\n                    }\\n                }\\n\\n            })\\n\\t\\t\\treturn values.join(\\\",\\\");\\n\\t\\t\\t},\\n\\n\\t\\t//获取games数据源\\n                   //您平常喜欢什么类型的游戏  列表格式化\\n\\t\\tgameTypeFormat:function(row, column, cellValue, index){\\n\\n\\t\\t\\tvar that = this\\n\\t\\t\\tvar values = [];\\n\\n            \\n\\t\\t\\tvar array = cellValue.split(\\\",\\\");\\n\\n\\t\\t\\tarray.forEach(function (item) {\\n                if (item) {\\n                    var data = that.gameTypeOptions.find(function (value) {\\n                        return value.value == item;\\n                    })\\n                    if(data && data.label){\\n                        values.push(data.label);\\n                    }\\n                }\\n\\n            })\\n\\t\\t\\treturn values.join(\\\",\\\");\\n\\t\\t\\t},\\n\\n\\t\\t//获取gameType数据源\\n\\t\\t\\n                   //您一周的游玩时间大概多长  列表格式化\\n\\t\\tlongTimeFormat:function(row, column, cellValue, index){\\n\\t\\t\\tvar value=\\\"\\\";\\n\\t\\t\\tif(cellValue){\\n\\t\\t\\t\\tvar data = this.longTimeOptions.find(function(value){\\n\\t\\t\\t\\t\\treturn value.value==cellValue;\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tif(data&&data.label){\\n\\t\\t\\t\\t\\tvalue = data.label;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn value;\\n\\t\\t},\\n\\n\\t\\t//获取longTime数据源\\n\\t\\t\\n                   //您是否愿意为游戏充值  列表格式化\\n\\t\\tisMoneyFormat:function(row, column, cellValue, index){\\n\\t\\t\\tvar value=\\\"\\\";\\n\\t\\t\\tif(cellValue){\\n\\t\\t\\t\\tvar data = this.isMoneyOptions.find(function(value){\\n\\t\\t\\t\\t\\treturn value.value==cellValue;\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tif(data&&data.label){\\n\\t\\t\\t\\t\\tvalue = data.label;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn value;\\n\\t\\t},\\n\\n\\t\\t//获取isMoney数据源\\n\\t\\t\\n                   //如果愿意接受充值的仅额是多少  列表格式化\\n\\t\\tmoneyLongFormat:function(row, column, cellValue, index){\\n\\t\\t\\tvar value=\\\"\\\";\\n\\t\\t\\tif(cellValue){\\n\\t\\t\\t\\tvar data = this.moneyLongOptions.find(function(value){\\n\\t\\t\\t\\t\\treturn value.value==cellValue;\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tif(data&&data.label){\\n\\t\\t\\t\\t\\tvalue = data.label;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\treturn value;\\n\\t\\t},\\n\\n\\t\\t//获取moneyLong数据源\\nvalidate:function(){\\nvar b = false\\nthis.$refs.form.validate(function(valid){\\nb = valid;\\n});\\nreturn b;\\n},\\nsave:function(callback) {\\nvar that = this;\\nvar url = this.formURL.save.url;\\nif (that.form.id > 0) {\\nurl = this.formURL.update.url;\\n}\\nthis.$refs.form.validate(function(valid) {\\nif (valid) {\\nvar form = JSON.parse(JSON.stringify(that.form));\\n                        if(form.games){\\n                            form.games = form.games.join(\',\');\\n                        }\\n                        if(form.gameType){\\n                            form.gameType = form.gameType.join(\',\');\\n                        }\\nform.modelId = that.modelId;\\nms.http.post(url, form).then(function (res) {\\nif(callback) {\\ncallback(res);\\n}\\n});\\n}else{\\ncallback({result:false,msg:\'请检查表单输入项\'});\\n}\\n})\\n},\\n//获取当前游戏调查\\nget:function(id) {\\nvar that = this;\\nms.http.get(this.formURL.get.url, Object.assign({\\\"modelId\\\":that.modelId},this.formURL.get.params)).then(function (res) {\\n                        //初始化多选框空值                         \\n                                        \\n                        //您平常玩什么游戏?  数组数据就默认使用逗号分隔，如果有其他情况需要在这里做处理\\n                        if(res.data.games){\\n                            res.data.games = res.data.games.split(\',\');\\n                        } else {\\n                            res.data.games = []; \\n                        }\\n                        //初始化多选框空值                         \\n                                        \\n                        //您平常喜欢什么类型的游戏  数组数据就默认使用逗号分隔，如果有其他情况需要在这里做处理\\n                        if(res.data.gameType){\\n                            res.data.gameType = res.data.gameType.split(\',\');\\n                        } else {\\n                            res.data.gameType = []; \\n                        }\\nif(res.result&&res.data){\\nthat.form = res.data;\\n}\\n}).catch(function (err) {\\nconsole.log(err);\\n});\\n},\\n\\n},\\ncreated:function() {\\n//渲染create\\n                                                                    \\nthis.get(this.form.linkId);\\n}\\n});\"}','[\r\n    {\r\n    \"model\":\"games\",\r\n    \"key\":\"GAMES\",\r\n    \"field\":\"GAMES\",\r\n    \"javaType\":\"String\",\r\n    \"jdbcType\":\"VARCHAR\",\r\n    \"name\":\"您平常玩什么游戏?\",\r\n    \"type\":\"checkbox\",\r\n    \"length\":\"255\",\r\n    \"isShow\":\"true\"\r\n    }\r\n    ,{\r\n    \"model\":\"gameType\",\r\n    \"key\":\"GAME_TYPE\",\r\n    \"field\":\"GAME_TYPE\",\r\n    \"javaType\":\"String\",\r\n    \"jdbcType\":\"VARCHAR\",\r\n    \"name\":\"您平常喜欢什么类型的游戏\",\r\n    \"type\":\"checkbox\",\r\n    \"length\":\"255\",\r\n    \"isShow\":\"true\"\r\n    }\r\n    ,{\r\n    \"model\":\"longTime\",\r\n    \"key\":\"LONG_TIME\",\r\n    \"field\":\"LONG_TIME\",\r\n    \"javaType\":\"String\",\r\n    \"jdbcType\":\"VARCHAR\",\r\n    \"name\":\"您一周的游玩时间大概多长\",\r\n    \"type\":\"radio\",\r\n    \"length\":\"255\",\r\n    \"isShow\":\"true\"\r\n    }\r\n    ,{\r\n    \"model\":\"isMoney\",\r\n    \"key\":\"IS_MONEY\",\r\n    \"field\":\"IS_MONEY\",\r\n    \"javaType\":\"String\",\r\n    \"jdbcType\":\"VARCHAR\",\r\n    \"name\":\"您是否愿意为游戏充值\",\r\n    \"type\":\"radio\",\r\n    \"length\":\"255\",\r\n    \"isShow\":\"true\"\r\n    }\r\n    ,{\r\n    \"model\":\"moneyLong\",\r\n    \"key\":\"MONEY_LONG\",\r\n    \"field\":\"MONEY_LONG\",\r\n    \"javaType\":\"String\",\r\n    \"jdbcType\":\"VARCHAR\",\r\n    \"name\":\"如果愿意接受充值的仅额是多少\",\r\n    \"type\":\"radio\",\r\n    \"length\":\"255\",\r\n    \"isShow\":\"true\"\r\n    }\r\n]\r\n\r\n','{\"type\":\"day\",\"value\":3}','2022-07-01 00:00:00.0','2022-07-31 00:00:00.0','2022-05-30 16:23:52.0','2022-07-07 09:48:17.0','81',0 );
INSERT INTO `mdiy_tag` ( `tag_name`,`tag_type`,`tag_sql`,`tag_description`,`del`,`not_del` ) VALUES  ( 'qa','macro','<#macro ms_qa qaName>\r\n<script src=\"${contextPath}/static/qa/index.js\"></script>\r\n<div id=\"form\" v-cloak style=\"width: 30%; margin: 5% auto\">\r\n  <div id=\"formModel\">\r\n    <!--会自动渲染代码生成器的表单-->\r\n  </div>\r\n  <!--必须包含验证码-->\r\n  <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-position=\"top\" size=\"large\" label-width=\"120px\">\r\n    <el-row :gutter=\"0\" justify=\"start\" align=\"top\">\r\n      <el-col :span=\"12\">\r\n        <el-form-item label=\"验证码\" prop=\"rand_code\">\r\n          <el-input\r\n                  size=\"small\"\r\n                  v-model=\"form.rand_code\"\r\n                  :disabled=\"false\"\r\n                  :readonly=\"false\"\r\n                  :clearable=\"true\"\r\n                  placeholder=\"请输入验证码\">\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-col>\r\n      <el-col :span=\"12\">\r\n        <div style=\"display: flex; height: 38px;margin-left: 1em;margin-top: 3em;align-items: center; cursor: pointer\">\r\n          <img :src=\"verifCode\" class=\"code-img\" @click=\"code\"/>\r\n          <div @click=\"code\" style=\"margin-left: 10px\">\r\n            看不清？换一张\r\n          </div>\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n    <el-form-item label=\"  \">\r\n      <el-button @click=\"save\" type=\"primary\" :loading=\"isLoading\" style=\"width: 200px\">\r\n        {{isLoading ? \'保存中\' : \'保存\'}}\r\n      </el-button>\r\n\r\n    </el-form-item>\r\n  </el-form>\r\n</div>\r\n<script>\r\n  //vue的实例名称必须为 from\r\n  var form = new Vue({\r\n    el: \'#form\',\r\n    data: {\r\n      formModel: undefined, //自定义业务的vue对象\r\n      verifCode:  \"${contextPath}/code.do?t=\" + new Date().getTime(),\r\n      isLoading: false,\r\n      form: {\r\n        rand_code: \'\'\r\n      },\r\n      rules: {\r\n        rand_code: [\r\n          {required: true, message: \'请输入验证码\', trigger: \'blur\'},\r\n          {min: 1, max: 4, message: \'长度不能超过4个字符\', trigger: \'change\'}\r\n        ],\r\n      },\r\n    },\r\n    methods: {\r\n      save: function () {\r\n        var that = this;\r\n        that.isLoading = true;\r\n        //将验证码值复制到自定义模型\r\n        form.formModel.form.rand_code = this.form.rand_code;\r\n        //调用自定义模型的保存\r\n        that.formModel.save(function (res) {\r\n          if (res.result) {\r\n            that.$notify({\r\n              title: \'成功\',\r\n              type: \'success\',\r\n              message: \'保存成功!\'\r\n            });\r\n\r\n          } else {\r\n            that.$notify({\r\n              title: \'失败\',\r\n              message: res.msg,\r\n              type: \'warning\'\r\n            });\r\n          }\r\n          that.isLoading = false;\r\n        });\r\n      },\r\n      code: function () {\r\n        this.verifCode =  \"${contextPath}/code.do?t=\" + (new Date).getTime();\r\n      }\r\n    },\r\n    created: function () {\r\n      var that = this;\r\n      qa.model.form(\"formModel\", {\"qaName\": \"${qaName}\"}).then(function (obj) {\r\n        that.formModel = obj;\r\n      });\r\n      ;\r\n    }\r\n  });\r\n</script>\r\n</#macro>','问卷调查',0,1 );
INSERT INTO `qa_game` ( `games`,`game_type`,`long_time`,`is_money`,`money_long`,`link_id`,`del`,`qa_device_type`,`qa_address`,`qa_ip` ) VALUES  ( 'cf','休闲','3~5','否','0~100',null,0,'pc','内网IP','192.168.0.54' );
INSERT INTO `qa_game` ( `games`,`game_type`,`long_time`,`is_money`,`money_long`,`link_id`,`del`,`qa_device_type`,`qa_address`,`qa_ip` ) VALUES  ( 'dnf','其他','5~10','否','100~200',null,0,'pc','内网IP','192.168.0.54' );
INSERT INTO `qa_game` ( `games`,`game_type`,`long_time`,`is_money`,`money_long`,`link_id`,`del`,`qa_device_type`,`qa_address`,`qa_ip` ) VALUES  ( 'dnf,lol,其他','竞技,其他','3~5','是','100~200',null,0,'pc','内网IP','192.168.0.54' );
INSERT INTO `qa_game` ( `games`,`game_type`,`long_time`,`is_money`,`money_long`,`link_id`,`del`,`qa_device_type`,`qa_address`,`qa_ip` ) VALUES  ( 'dnf,lol,其他','竞技,其他','3~5','是','其他',null,0,'pc','内网IP','192.168.0.54' );
